# 线程概述
&emsp;&emsp;几乎所有的操作系统都支持同时运行多个任务，一个任务通常就是一个程序，每个运行中的程序就是一个进程。当一个程序运行时，内部可能包含了多个顺序执行流，每个顺序执行流就是一个线程。  
## 线程和进程
&emsp;&emsp;几乎所有的操作系统都支持进程的概念，所有运行中的任务通常对应一个进程(Process)。当一个程序进入内存运行时，即变成一个进程。进程是处于运行过程中的程序，并且具有一定的独立功能，进程是系统进行资源分配和调度的一个独立单位。  
&emsp;&emsp;进程包含如下三个特征：  
- 独立性：进程是系统中独立存在的实体，它可以拥有自己独立的资源，每一个进程都拥有自己私有的地址空间。 没有经过进程本身允许的情况下，一个用户进程不可以直接访问其它进程的地址空间。  
- 动态性：进程与程序的区别在于，程序只是一个静态的指令集合，而进程是一个存在系统中活动的指令集合。在进程中加入了时间的概念。进程具有自己的生命周期和各种不同的状态，这些概念在程序中都是不具备的。  
- 并发性：多个进程可以在单个处理器上并发执行，多个进程之前不会互相影响。  

**注**：并发性(concurrency)和并行性(parallel)是两个概念，并行指在同一个时刻，有多条指令在多个处理器上同时执行；并发指在同一个时刻只能有一条指令执行，但多个进程指令被快速轮换执行，使得在宏观上具有多个进程同时执行的效果。  
&emsp;&emsp;大部分操作系统都支持多进程迸发运行，现代的操作系统几乎都支持同时运行多个任务。对于CPU而言，它在某个时间点只能执行一个程序，也就是说， 只能运行一个进程，CPU不断地在这些进程之前轮换执行；同时也因为CPU的执行速度对于人的感觉来说非常快，所以用户并不能感觉到进程之前的切换。  
&emsp;&emsp;多线程则扩展了多进程的概念，使得同一个进程可以同时并发处理多个任务。线程(Thread)也被称作轻量级进程(Lightweight Process)，线程是进程的执行单元。就像进程在操作系统中的地位一样，线程在程序中是独立的、并发的执行流。当进程被初始化后，主线程就被创建了。对于绝大多数的应用程序来说，通常仅要求有一个主线程，但也可以在该进程内创建多条顺序执行流，这些顺序执行流就是线程，每个线程也是互相独立的。  
&emsp;&emsp;线程是进程的组成部分，一个进程可以拥有多个线程，一个纯种必须有一个父进程。线程可以拥有自己的堆栈、知道的程序计数器和自己的局部变量，但不拥有系统资源，它与父进程的其它纯种共享该进程所拥有的全部资源。因为多个线程共享父进程里的全部资源，因此编程更新方便；但是必须更加小心，因为需要确保线程不会妨碍同一进程里的其它线程。  
&emsp;&emsp;线程可以完成一定的任务，可以与其它线程共享父进程中的变量及部分环境，相互之前协同来完成进程所要完成的任务。  
&emsp;&emsp;线程是独立运行的，它并不知道进程中是否还有其它线程存在。线程的执行是抢占式的，也就是说，当前运行的线程在任何时候都可能被挂起，以便另外一个线程可以运行。  
&emsp;&emsp;一个线程可以创建和撤销另外一个线程，同一个进程中的多个线程之间可以并发执行。  
&emsp;&emsp;从逻辑角度来看，多线程存在于一个应用程序中，让一个应用程序中可以有多个执行部分同时执行，但操作系统无须将多个线程看作独立的应用，对多线程定调度和管理以及资源分配。线程的高度和管理由进程本身负责完成。  
&emsp;&emsp;简而言之，一个程序运行后至少有一个进程，一个进程里可以包含多个线程，但至少要包含一个(主)线程。  

## 多线程的优势
&emsp;&emsp;线程在程序中是独立的、并发的执行流，与分隔的进程相比，进程中线程之间的隔离程序要小。它们共享内存、文件句柄和其它每个进程应有的状态。  
&emsp;&emsp;因为线程的划分尺度小于进程，使得多线程程序的并发性高。进程在执行过程中拥有独立的内存单元，而多个线程共享内存，从而极大地提高了程序的运行效率。  
&emsp;&emsp;线程比进程具有更高的性能，这是由于同一个进程的线程都有共性————多个线程共享同一个进程虚拟空间。线程共享的环境包括：进程代码段、进程的公有数据等。利用这些共享的数据，线程很容易实现相互之间的通信。  
&emsp;&emsp;当操作系统创建一个进程时，必须为该进程分配独立的内存空间，并分配大量的相关资源；但创建一个线程则简单得多，因此使用多线程来实现并发比使用多进程实现并发的性能要高得多。  
&emsp;&emsp;使用多线程编程具有如下几个优点：  
- 进程之前不能共享内存，但线程之前共享内存非常容易；  
- 系统创建进程时需要为该进程重新分配系统资源，但分线程的代价则小得多，因此使用多线程来实现多任务并发比多进程的效率高；  
- java语言内置了多线程功能支持，而不是单纯地作为底层操作系统的调度方式，从而简化了Java的多线程编程。   

&emsp;&emsp;在实际应用中，多线程是非常有用的，一个浏览器必须能同时下载多张图片；一个WEB服务器必须能同时响应多个用户请求；Java虚拟机本身就在后台提供了一个超级线程来进行垃圾回收(CG)；图形用户界面(GUI)应用也需要启动单独的线程从主机环境收集用户界面事件。  
## 线程的创建和启动
&emsp;&emsp;Java使用Thread类代表线程，所有的线程对象都必须是Thread类或其子类的实例。每个线程的作用是完成一定的任务，实际上就是执行一段程序流(一段顺序执行的代码)。Java使用线程执行体来代表这段程序流。  
### 继承Thread类创建线程类
&emsp;&emsp;通过继承Thread类来创建并启动多线程的步骤如下：
1. 定义Thread类的子类，并重写该类的run()方法，该run()方法的方法体就代表了线程需要完成的任务。因此把run()方法称为线程的执行体；  
2. 创建Thread子类的实例，即创建了线程对象；  
3. 调用线程对象的start()方法来启动该线程。

**demo**
